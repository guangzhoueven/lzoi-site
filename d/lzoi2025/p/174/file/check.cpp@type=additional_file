// https://leetcode.cn/problems/maximum-product-subarray/solutions/250015/cheng-ji-zui-da-zi-shu-zu-by-leetcode-solution/
#include <bits/stdc++.h>
using namespace std;

long maxProduct(const vector<int>& nums) {
    long maxF = nums[0], minF = nums[0], ans = nums[0];
    for (int i = 1; i < nums.size(); ++i) {
        long mx = maxF, mn = minF;
        maxF = max(mx * nums[i], max((long)nums[i], mn * nums[i]));
        minF = min(mn * nums[i], min((long)nums[i], mx * nums[i]));
        if(minF<INT_MIN) {
            minF=nums[i];
        }
        ans = max(maxF, ans);
    }
    return ans;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0); cout.tie(0);

    int n;
    cin >> n;
    vector<int> a(n);
    for (int i = 0; i < n; i++) cin >> a[i];
    cout << maxProduct(a) << '\n';

    return 0;
}