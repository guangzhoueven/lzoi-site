#include <bits/stdc++.h>
using namespace std;
using i64 = long long;

int main() {
	ios::sync_with_stdio(false), cin.tie(nullptr), cout.tie(nullptr);
	i64 N, V;
	cin >> N >> V;
	vector<i64> dp(V + 1, 0);

	for (i64 i = 1; i <= N; i++) {
		i64 v, w, s;
		cin >> v >> w >> s;

		if (s == -1)
			for (i64 j = V; j >= v; j--)
				dp[j] = max(dp[j], dp[j - v] + w);
		else if (s == 0)
			for (i64 j = v; j <= V; j++)
				dp[j] = max(dp[j], dp[j - v] + w);
		else {
			for (i64 d = 1; s > 0; d *= 2) {
				i64 c = min(d, s);
				i64 nv = c * v, nw = c * w;
				for (i64 j = V; j >= nv; j--)
					dp[j] = max(dp[j], dp[j - nv] + nw);
				s -= c;
			}
		}
	}
	cout << dp[V] << "\n";
	return 0;
}