#include <bits/stdc++.h>
using namespace std;
using i64 = long long;
const i64 INF = LLONG_MAX;

void dfs(i64 u, vector<vector<i64>>& g, vector<i64>& v, vector<i64>& w, vector<vector<i64> > & dp, i64 V) {
	for (i64 j = v[u]; j <= V; j++)	dp[u][j] = w[u];
	for (i64 son : g[u]) {
		dfs(son, g, v, w, dp, V);
		for (i64 j = V; j >= v[u]; j--)
			for (i64 k = 0; k <= j - v[u]; k++)
				if (dp[u][j - k] != -1 && dp[son][k] != -1)
					dp[u][j] = max(dp[u][j], dp[u][j - k] + dp[son][k]);
	}
}

int main() {
	ios::sync_with_stdio(false), cin.tie(nullptr), cout.tie(nullptr);
	i64 N, V;
	cin >> N >> V;
	vector<vector<i64>> g(N + 1);
	vector<i64> v(N + 1), w(N + 1);

	i64 x, r = 0;
	for (i64 i = 1; i <= N; i++) {
		cin >> v[i] >> w[i] >> x;
		if (x == -1) r = i;
		else g[x].push_back(i);
	}

	vector<vector<i64>> dp(N + 1, vector<i64>(V + 1, -1));
	dfs(r, g, v, w, dp, V);
	
	i64 ans = 0;
	for (i64 j = 0; j <= V; j++)
		ans = max(ans, dp[r][j]);
	cout << ans << "\n";
	return 0;
}